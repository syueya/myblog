(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1066:function(s,a,t){"use strict";t.r(a);var n=t(11),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("一个AI模型聚合管理中转分发系统。")]),s._v(" "),a("p",[s._v("官方网址：https://github.com/QuantumNous/new-api\n参考文档：https://docs.newapi.pro/zh/docs")]),s._v(" "),a("h2",{attrs:{id:"容器部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器部署"}},[s._v("#")]),s._v(" 容器部署")]),s._v(" "),a("p",[s._v("注意：")]),s._v(" "),a("ul",[a("li",[s._v("默认使用SQLite数据库，如果需要使用远程数据库，请自行修改配置。")]),s._v(" "),a("li",[s._v("如果使用本地数据库SQLite，需挂载 /data 目录。")]),s._v(" "),a("li",[s._v("如果使用远程数据库，需要MySQL ≥ 5.7.8 或 PostgreSQL ≥ 9.6。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('services:\n  new-api:\n    image: calciumion/new-api:latest\n    container_name: new-api\n    restart: always\n    command: --log-dir /app/logs\n    ports:\n      - 3007:3000\n    volumes:\n      - ./data:/data\n      - ./logs:/app/logs\n    environment:\n    # - SQL_DSN=postgresql://root:123456@192.168.31.15:5432/newapidb # 如果使用postgresql数据库\n    # - SQL_DSN=root:123456@tcp(192.168.31.15:3306)/newapidb  # 如果使用mysql数据库\n      - REDIS_CONN_STRING=redis://192.168.31.15:6379\n      - PORT=3000\n      - TZ=Asia/Shanghai\n      - ERROR_LOG_ENABLED=true # 是否启用错误日志记录\n      - BATCH_UPDATE_ENABLED=true # 是否启用批量更新\n    healthcheck:\n      test: ["CMD-SHELL", "wget -q -O - http://localhost:3000/api/status | grep -o \'\\"success\\":\\\\s*true\' || exit 1"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h2",{attrs:{id:"配置newapi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置newapi"}},[s._v("#")]),s._v(" 配置newapi")]),s._v(" "),a("p",[s._v("1、打开浏览器，输入IP:端口，进入newapi配置页。如果你的数据库检查没有错误，点击下一步\n"),a("img",{attrs:{src:t(841),alt:"img"}})]),s._v(" "),a("p",[s._v("2、填写管理员账号和密码，点击下一步\n"),a("img",{attrs:{src:t(842),alt:"img"}})]),s._v(" "),a("p",[s._v("3、选择使用模式，点击下一步\n"),a("img",{attrs:{src:t(843),alt:"img"}})]),s._v(" "),a("p",[s._v("4、点击初始化系统\n"),a("img",{attrs:{src:t(844),alt:"img"}})]),s._v(" "),a("p",[s._v("5、初始化后点击右上角的登陆，输入账号密码进入首页。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(845),alt:"img"}})]),s._v(" "),a("p",[s._v("6、进入首页\n"),a("img",{attrs:{src:t(846),alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"配置渠道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置渠道"}},[s._v("#")]),s._v(" 配置渠道")]),s._v(" "),a("p",[s._v("1、点击添加渠道\n"),a("img",{attrs:{src:t(847),alt:"img"}})]),s._v(" "),a("p",[s._v("2、开始创建新渠道")]),s._v(" "),a("p",[s._v("1）来源")]),s._v(" "),a("p",[s._v("类型默认是OpenAI格式。名称随意，密钥和API地址要填对应的\n"),a("img",{attrs:{src:t(848),alt:"img"}})]),s._v(" "),a("blockquote",[a("p",[s._v("注意：使用默认OpenAI格式，API地址不要带"),a("code",[s._v("/v1/chat/completions")]),s._v("，它会自动补全。或者你也可以使用#号放在最后面来禁止自动补全。")]),s._v(" "),a("ul",[a("li",[s._v("正常："),a("code",[s._v("https://tbai.xin")])]),s._v(" "),a("li",[s._v("或者："),a("code",[s._v("https://tbai.xin/v1/chat/completions#")])])])]),s._v(" "),a("p",[s._v("2）填写模型")]),s._v(" "),a("ul",[a("li",[s._v("点击获取模型列表，获取不了的前面配置肯定有错误。")]),s._v(" "),a("li",[s._v("点击复制所有模型，按照下面的提示词叫AI处理获取重定向模型")]),s._v(" "),a("li",[s._v("点击清除所有模型，在自定义模型名称里面输入重定向后的模型名称，点击填入")]),s._v(" "),a("li",[s._v("测试模型可以不用管，也可以复制一个快速便宜的模型，不过要注意，测试模型要填写重定向后的模型名称")]),s._v(" "),a("li",[s._v("在模型重定向里点击手动编辑，把生成的json文本复制进去")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(849),alt:"img"}})]),s._v(" "),a("p",[s._v("3）其他")]),s._v(" "),a("ul",[a("li",[s._v("分组自己用的话随便")]),s._v(" "),a("li",[s._v("标签随意，只是填写的话开启标签聚合可以更加直观，另外这个标签只在渠道上自己可以看到，别人看不到的")]),s._v(" "),a("li",[s._v("可以把自动禁用关闭，避免误判\n"),a("img",{attrs:{src:t(850),alt:"img"}})])]),s._v(" "),a("p",[s._v("4）然后提交即可，渠道就添加完成了")]),s._v(" "),a("h3",{attrs:{id:"模型重定向规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模型重定向规则"}},[s._v("#")]),s._v(" 模型重定向规则")]),s._v(" "),a("p",[s._v("L站大佬提供的提示词：")]),s._v(" "),a("ul",[a("li",[s._v("识别模型名的厂商归属，比如"),a("code",[s._v("通义千问-xxx")]),s._v("是Qwen")]),s._v(" "),a("li",[s._v("去掉模型名里的日期或多余后缀，只保留主模型名，如 claude-3-5-haiku-20241022，不要 20241022是claude-3-5-haiku。允许多个原模型映射到同一标准名。")]),s._v(" "),a("li",[s._v("按照“厂商/标准模型名”格式重定向名称，左边为重定向后的名称，右边为原来名称。")])]),s._v(" "),a("p",[s._v("厂商列表严格使用英文，如 智谱 → ChatGLM、千问 → Qwen、腾讯混元 → Hunyuan。列表包括不限于：")]),s._v(" "),a("ul",[a("li",[s._v("Anthropic")]),s._v(" "),a("li",[s._v("OpenAI")]),s._v(" "),a("li",[s._v("Gemini")]),s._v(" "),a("li",[s._v("Moonshot")]),s._v(" "),a("li",[s._v("ChatGLM")]),s._v(" "),a("li",[s._v("Qwen")]),s._v(" "),a("li",[s._v("DeepSeek")]),s._v(" "),a("li",[s._v("Hunyuan")]),s._v(" "),a("li",[s._v("MistralAI")]),s._v(" "),a("li",[s._v("xAI")]),s._v(" "),a("li",[s._v("Llama")]),s._v(" "),a("li",[s._v("penAl")])]),s._v(" "),a("p",[s._v("模型重定向示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "Anthropic/claude-3.5-haiku": "claude-3-5-haiku-20241022",\n  "智谱/GLM-4.5-air": "BigModel/GLM-4.5-air",\n  "Gemini/Gemini-xxx": "Gemini-xxx",\n  "智谱/智谱-xxx": "智谱-xxx",\n  "通义千问/通义千问-xxx": "通义千问-xxx",\n  "DeepSeek/DeepSeek-xxx": "DeepSeek-xxx",\n  "腾讯混元/腾讯混元-xxx": "腾讯混元-xxx",\n  "Llama/Llama-xxx": "Llama-xxx"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("重定向后的模型名，即左边部分的名称：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Anthropic/claude-3.5-haiku,智谱/GLM-4.5-air,Gemini/Gemini-xxx,智谱/智谱-xxx,通义千问/通义千问-xxx,DeepSeek/DeepSeek-xxx,腾讯混元/腾讯混元-xxx,Llama/Llama-xxx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"模型管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模型管理"}},[s._v("#")]),s._v(" 模型管理")]),s._v(" "),a("p",[s._v("1、先添加一个提供商，图标可以点击下面的链接查看厂商logo对应的名称")]),s._v(" "),a("p",[a("img",{attrs:{src:t(851),alt:"img"}})]),s._v(" "),a("p",[s._v("2、然后点击未配置模型 ，找到刚刚添加的任意一个模型，点击配置")]),s._v(" "),a("p",[a("img",{attrs:{src:t(852),alt:"img"}})]),s._v(" "),a("p",[s._v("3、名称里把/后面的模型名称内容删了，仅保留重定向模型添加的厂商部分。名称匹配类型选择前缀名称匹配。图标和描述喜欢的可以去配置一下，标签可以随便添加。然后点击提交即可")]),s._v(" "),a("p",[a("img",{attrs:{src:t(853),alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置"}},[s._v("#")]),s._v(" 设置")]),s._v(" "),a("p",[s._v("1、配置倍率")]),s._v(" "),a("p",[s._v("开自用模式的不用看，有强迫症可以看，让你的数据更加直观。按照图片找到未配置的模型，可以使用批量设置。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(854),alt:"img"}})]),s._v(" "),a("p",[s._v("可以设置固定价格为1。\n"),a("img",{attrs:{src:t(855),alt:"img"}})]),s._v(" "),a("p",[s._v("2、在其他设置里配置名称和图标\n"),a("img",{attrs:{src:t(856),alt:"img"}})])])}),[],!1,null,null,null);a.default=e.exports},841:function(s,a,t){s.exports=t.p+"assets/img/newapi-01.7c1b5c93.png"},842:function(s,a,t){s.exports=t.p+"assets/img/newapi-02.ea14f040.png"},843:function(s,a,t){s.exports=t.p+"assets/img/newapi-03.77d52d8f.png"},844:function(s,a,t){s.exports=t.p+"assets/img/newapi-04.15353d2d.png"},845:function(s,a,t){s.exports=t.p+"assets/img/newapi-05.02741bbf.png"},846:function(s,a,t){s.exports=t.p+"assets/img/newapi-06.c58ca1fd.png"},847:function(s,a,t){s.exports=t.p+"assets/img/newapi-07.9d25153e.png"},848:function(s,a,t){s.exports=t.p+"assets/img/newapi-08.33baa56f.png"},849:function(s,a,t){s.exports=t.p+"assets/img/newapi-09.f5188b9d.png"},850:function(s,a,t){s.exports=t.p+"assets/img/newapi-10.b9f0eb6e.png"},851:function(s,a,t){s.exports=t.p+"assets/img/newapi-11.dba54da2.png"},852:function(s,a,t){s.exports=t.p+"assets/img/newapi-12.19862337.png"},853:function(s,a,t){s.exports=t.p+"assets/img/newapi-13.02a44e87.png"},854:function(s,a,t){s.exports=t.p+"assets/img/newapi-14.9681a949.png"},855:function(s,a,t){s.exports=t.p+"assets/img/newapi-15.10cb1f27.png"},856:function(s,a,t){s.exports=t.p+"assets/img/newapi-16.f107eb1b.png"}}]);