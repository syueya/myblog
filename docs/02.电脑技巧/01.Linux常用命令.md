---
title: linux常用命令
author: 
  name: 夏夏子
  link: https://github.com/syueya
date: 2025-09-29 14:01:47
permalink: /pages/528263/
categories: 
  - 电脑技巧
tags: 
  - 
---
## 常用命令

### 1、切换root权限

`sudo su`或`sudo -i`命令 : 用于切换到超级用户（root）权限

- 输入命令后按回车键
- 输入密码，密码不显示，输入完成后按回车即可
- 输入的符号从【$】变成【#】就代表有权限了。
  ![img](./img/sudo.png)

### 2、退出ssh

输入 exit 然后按回车
快捷键：Ctrl+D

### 3、查看主机信息hostnamectl

`hostnamectl`  是一个 Linux 命令，通常用于管理系统的主机名和相关的系统信息。执行后会显示以下信息：
- Static hostname：系统静态主机名（永久生效，重启后不改变）。
- Icon name/Chassis：系统图标标识/设备类型，常见Chassis：
  - vm：虚拟机
  - laptop：笔记本
  - desktop：台式计算机
  - server：服务设备
  - container：容器
  - tablet：平板电脑
- Machine ID/Boot ID：系统唯一标识（Machine ID 永久，Boot ID 每次重启生成）。
- Operating System：操作系统完整版本
- Kernel：当前运行的 Linux 内核版本
- Architecture：硬件架构
-  Firmware version：固件版本
  ![img](./img/hostnamectl.png) 

>修改主机名：通过  `hostnamectl set-hostname xxx`  命令，您可以更改系统的主机名为 XXX。

### 4、获取用户id和组id

id命令用于显示用户的ID，以及所属群组的ID。

语法：`id [-gGnru][--help][--version][用户名称]`
参数说明：
- `-g 或 --group` : 显示用户所属群组的ID。
- `-G 或 --groups` : 显示用户所属附加群组的ID。
- `-n 或 --name` : 显示用户，所属群组或附加群组的名称。
- `-r 或 --real` : 显示实际ID。
- `-u 或 --user` : 显示用户ID。
- `-help` : 显示帮助。
- `-version` : 显示版本信息。

示例:
- 显示当前用户ID：`id`
- 显示指定用户的ID：`id xia`
  ![img](./img/id.png) 

>其中显示的uid和gid就是我们在docker环境设置里的PUID和PGID

## 目录及文件

### pwd--显示用户当前所处的工作目录

用法：`pwd [选项]...`
选项：-P 显示链接的真实路径。

### cd--命令用于切换当前工作路径

用法：
- `cd ..`：切换路径至当前目录的上一级
- `cd -`：返回前一个路径
- `cd`：切换目录至当前用户的家目录

### ls--显示目录与文件信息

用法：`ls [选项]... [文件/目录]`
选项：
- `-a`：显示所有，包括隐藏文件与目录。
- `-d`：显示目录本身的信息，而非目录内的文件。
- `-h`：人性化显示容量信息。
- `-l`：长格式列出文档详细信息。包括权限设置和文件属性。
- `-i`：显示每个文件的 inode 号。
- `-S`：根据文件大小排序
- `-u`：显示文件或目录最后被访问的时间。

示例：`ls -l /volume3/docker/cow/godcmd.py`

输出结果可能类似于以下格式：`-rwxrwxrw-+ 1 syue admin 378 May 23 10:34 /volume3/docker/cow/godcmd.py`

- `-rwxrwxrw-+`: 表示文件权限，其中第一个字符 - 表示这是一个常规文件，后续的权限位分为三组，每组三个字符，分别代表文件所有者、文件所属组和其他用户的权限。其中：
  - `rwx`：文件所有者 (syue) 具有读、写和执行权限。
  - `rwx`：文件所属组 (admin) 具有读、写和执行权限。
  - `rw-`：其他用户也具有读和写权限
  - `1`: 表示链接数，通常是指向该文件的硬链接数。
  - `syue`: 文件所有者是用户 syue。
  - `admin`: 文件所属组是 admin。
  - `378`: 表示文件大小（以字节为单位）。
  - `May 23 10:34`: 表示文件的最后修改日期和时间。
  - `/volume3/docker/cow/godcmd.py`: 是文件的完整路径。

通过这个命令的输出，您可以查看文件 openai_voice.py 的权限设置，所有者、所属组、大小以及最后修改时间等信息。

### mkdir--创建目录

用法：`mkdir [选项]...[目录]...`
选项：`-p` 创建多级目录。

### cp--复制文件与目录

用法：`cp [选项] 源 目标`
选项：
- `-r`：递归复制目录及其子目录内的所有目录。
- `-a`：复制时保留源文档的所有属性（包括权限、时间等）。

### rm--删除文件或目录

删除文件时可以不加选项，删除目录时必须加选项 -r

用法：`rm [选项]...文件...`
选项：
- `-f`：不提示，强制删除。
- `-r`：递归删除，删除目录及目录下的所有内容。

### find--搜索文件或目录

用法：`find [命令选项] [路径] [表达式选项]`
选项：
- `-name`： 按文档名称查找
- `-iname`： 按文档名查找，且不区分大小写
- `-mtime`： 按修改时间查找
- `-group`： 按组查找
- `-user`： 按用户查找
- `-size`： 按容量大小查找
- `-type`： 按文档类型查找，文件（f）、目录（d）、设备（b，c），链接（l）等。
- `-exec`： 对找到的文档执行特定的命令
- `-a`： 并且
- `-o`： 或者

### du--计算文件或者目录的容量

用法：`du [选项] [文件或目录]`
选项：
- `-h`：以人类可读格式（如 KB、MB、GB）显示结果。
- `-s`：仅显示目录或文件的总大小，而不显示子目录的大小。

比如查看当前目录大小：`du -h .`

### chmod--改变文件或目录的权限

**1、符号模式**

在符号模式下，可以使用 chmod 命令按以下格式添加权限：

`chmod [类别][操作][权限] 文件名`

- 类别：u（用户User）、g（组Group）、o（其他Others）、a（所有All）
- 操作：+（添加）、-（移除）、=（设置）
- 权限：r（读Read）、w（写Write）、x（执行Execute）

比如给所有用户添加读权限：`chmod a+r filename`


**2、八进制模式**

在八进制模式下，可以使用 chmod 命令按以下格式添加权限：`chmod [权限] 文件名`

权限：由三个数字组成，每个数字代表不同用户类别的权限（用户、组、其他）。

八进制表示法中的每个数字表示一个用户类别的权限，具体如下：
- 4：读（read）
- 2：写（write）
- 1：执行（execute）

这些值可以相加，以表示组合权限：
- 7（4 + 2 + 1）：读、写和执行
- 6（4 + 2）：读和写
- 5（4 + 1）：读和执行
- 3（2 + 1）：写和执行

比如`chmod 755 filename`：文件所有者有读、写和执行权限（7），所属组和其他用户有读和执行权限（5）


## 查看文件内容

### cat--查看文件里的内容

用法：`cat [选项] [文件]`
选项：
- `-n`：显示行号，包括空白行
- `-b`：显示行号，空白行不显示行号

### more--查看文件里的内容

more 命令和 cat 的功能一样都是查看文件里的内容，但有所不同的是 more 可以按页来查看文件的内容，还支持直接跳转行等功能。
用法：`more [选项] [文件]`
常用操作命令：
- `Enter键`：向下n行，需要定义。默认为1行
- `空格键`：向下滚动一屏
- `Ctrl+B`：返回上一屏
- `=`：输出当前行的行号
- `v`：调用 vi 编辑器，编辑当前查看的文
- `!`：不退出 more 查看模式，临时执行其他 Linux 命令
- `q`：退出more，返回命令行


### less--分页查看文件内容

操作：
- 空格（下一页）
- 方向键（上下回翻）
- q 键（退出查看）

### head--显示文件头部内容

用法：`head [选项] [文件]`
选项：
- `-c nK`：显示文件前 nKB 的内容。
- `-n`：显示文件前 n 行的内容。

### tail--显示文件尾部内容

用法：`tail [选项] [文件]`
选项：
- `-c nK`：显示文件末尾 nKB 的内容。
- `-n`：显示文件末尾 n 行的内容。
- `-f`：动态显示文件内容，常用于查看日志，按 Ctrl+C 组合键退出。

### grep--查找

用法：`grep [选项] 匹配模式 [文件]...`
常用选项：
- `-i`：忽略大小写
- `-v`：取反匹配

比如在 passwd 文件中过滤出包含 root 的行：`grep root /etc/passwd`


### md5sum--查看文件md5

用法：`md5sum <filename>`

这里的 filename 是你想要计算 MD5 校验和的文件的名称。例如：`md5sum example.txt`

处理文件名中的特殊字符：如果文件名包含空格或特殊字符，你可能需要将文件名用单引号或双引号括起来。例如：`md5sum '散就散了 - 庆庆.mp3'`

## apt 相关

apt 命令执行需要超级管理员权限(root)。

- 列出所有可更新的软件清单命令：`apt update`
- 升级软件包：`apt upgrade`
- 列出可更新的软件包及版本信息：`apt list --upgradeable`
- 升级软件包，升级前先删除需要更新软件包：`apt full-upgrade`
- 安装指定的软件命令：`apt install <package_name>`
- 安装多个软件包：`apt install <package_1> <package_2> <package_3>`
- 更新指定的软件命令：`apt update <package_name>`
- 显示软件包具体信息,例如：版本号，安装大小，依赖关系等等：`apt show <package_name>`
- 删除软件包命令：`apt remove <package_name>`
- 清理不再使用的依赖和库文件: `apt autoremove`
- 移除软件包及配置文件: `apt purge <package_name>`
- 查找软件包命令： `apt search <keyword>`
- 列出所有已安装的包：`apt list --installed`
- 列出所有已安装的包的版本信息：`apt list --all-versions`


## vi编辑器

vi(visual interface)是Linux/UNIX系列OS中通用的全屏编辑器。

vi分为两种状态：
- 编辑状态：用来编辑文本资料
- 命令状态(初始状态)：所键入的字符系统均作命令来处理
  - `:q`：在未修改文档的情况下退出
  - `:wq`：文档存盘退出
  - `i`：从光标前面开始插入文本
  - `a`：从光标后面开始添加文本


当你进入vi时，会首先进入命令状态。此时可以通过`i`或`a`命令进入编辑状态。进入编辑状态后，可以按ESC键进入命令状态。

>如果在编辑过程中不小心按了Ctrl+s,vi会处于僵死状态，按Ctrl+q可以恢复。


## bpytop--终端资源监视器

- 安装：`sudo apt install bpytop`

- 使用：在终端中输入  `bpytop`  回车，即可打开 bpytop 工具

- 退出：按键盘上的  `q`  键，将关闭 bpytop 工具并返回到终端提示符

- 效果：
  ![img](./img/bpytop.png)
