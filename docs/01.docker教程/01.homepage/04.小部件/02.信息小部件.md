---
title: 信息小部件
permalink: /docker/homepage/widgets/info
date: 2023-10-24 14:23:11
categories: 
  - docker教程
  - homepage
  - 小部件
tags: 
  - 
---
## Date & Time

这可以显示日期 和/或 时间，并可以使用[国际日期时间格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat)进行详细配置。

格式设置是与区域设置相关的，并以您期望的区域格式呈现日期，例如对于英文区域设置，日期格式为9/16/22下午3:03，而对于德文区域设置，日期格式为16.09.22下午15:03。您还可以使用locale选项为datetime小部件指定一个特定的区域设置（见下文）

```yaml
- datetime:
      text_size: xl
      format:
          timeStyle: short
```
传递给format的任何选项都直接传递给[国际日期时间格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat)，请参考MDN文档获取所有可用选项。

有效的文本大小有 `4xl`, `3xl`, `2xl`, `xl`, `md`, `sm`, `xs`。

以下是一些例子：

```yaml
# 13:37
format:
    timeStyle: short
    hourCycle: h23
```

```yaml
# 1:37 PM
format:
    timeStyle: short
    hour12: true
```

```yaml
# 1/23/22, 1:37 PM
format:
    dateStyle: short
    timeStyle: short
    hour12: true
```

```yaml
# 4 januari 2023 om 13:51:25 PST
locale: nl
format:
    dateStyle: long
    timeStyle: long
```

## Glances
_(可以查找[Glances](../services/glances.md)服务小部件)_

Glances小部件可以监视主机或另一台机器的资源（CPU、内存、存储、温度和正常运行时间），并且可以与`resources`小部件匹配。您可以通过添加另一个配置块来创建多个实例。`cputemp`、`uptime` & `disk` 状态需要单独的API调用，因此默认情况下不启用。要启用API，Glances需要在“Web服务器”模式下运行，请参阅[Glances文档](https://glances.readthedocs.io/en/latest/quickstart.html#web-server-mode)。

```yaml
- glances:
      url: http://host.or.ip:port
      username: user # optional if auth enabled in Glances
      password: pass # optional if auth enabled in Glances
      cpu: true # optional, enabled by default, disable by setting to false
      mem: true # optional, enabled by default, disable by setting to false
      cputemp: true # disabled by default
      uptime: true # disabled by default
      disk: / # disabled by default, use mount point of disk(s) in glances. Can also be a list (see below)
      expanded: true # show the expanded view
      label: MyMachine # optional
```

可以通过以下方式指定多个磁盘：

```yaml
disk:
  - /
  - /boot
  ...
```
## Greeting

可以显示简单的文本，配置如下：

```yaml
- greeting:
      text_size: xl
      text: Greeting Text
```

有效的文本大小有：`4xl`, `3xl`, `2xl`, `xl`, `md`, `sm`, `xs`.

## Kubernetes

这与Resources小部件非常相似，但提供了有关Kubernetes集群的资源信息。

它提供 节点级别 和/或 集群级别 的CPU和内存使用情况。


```yaml
- kubernetes:
      cluster:
          # Shows cluster-wide statistics
          show: true
          # Shows the aggregate CPU stats
          cpu: true
          # Shows the aggregate memory stats
          memory: true
          # Shows a custom label
          showLabel: true
          label: "cluster"
      nodes:
          # Shows node-specific statistics
          show: true
          # Shows the CPU for each node
          cpu: true
          # Shows the memory for each node
          memory: true
          # Shows the label, which is always the node name
          showLabel: true
```
## Logo

可以显示homepage的logo。

你可以选择使用与其他图标相似的选项来指定自己的图标，请参阅[service icons](../../configs/services.md#icons)。


```yaml
- logo:
    icon: https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/I_Love_New_York.svg/1101px-I_Love_New_York.svg.png # optional
```

## Longhorn

Longhorn小部件从Kubernetes上的Longhorn存储驱动程序中获取存储利用率指标。它的设计与Resource小部件的磁盘表示类似。

确切的指标应该与Longhorn仪表板上看到的非常相似。

它可以显示聚合指标 和/或 各个节点的指标。


```yaml
- longhorn:
      # Show the expanded view
      expanded: true
      # Shows a node representing the aggregate values
      total: true
      # Shows the node names as labels
      labels: true
      # Show the nodes
      nodes: true
      # An explicit list of nodes to show. All are shown by default if "nodes" is true
      include:
          - node1
          - node2
```
Longhorn URL和凭据存储在`settings.yaml`的`providers`部分。

## Open-Meteo


不需要注册！ 参考 [https://open-meteo.com/en/docs](https://open-meteo.com/en/docs)

```yaml
- openmeteo:
      label: Kyiv # optional
      latitude: 50.449684
      longitude: 30.525026
      timezone: Europe/Kiev # optional
      units: metric # or imperial
      cache: 5 # Time in minutes to cache API responses, to stay within limits
```
您可以选择不传递`latitude纬度`和`longitude经度`经度，小部件将使用您的当前位置（需要安全上下文，例如HTTPS）。

## OpenWeatherMap

所需的仅是免费套餐的"One Call API"，您需要[订阅](https://home.openweathermap.org/subscriptions/unauth_subscribe/onecall_30/base)并获取您的API密钥。

```yaml
- openweathermap:
      label: Kyiv #optional
      latitude: 50.449684
      longitude: 30.525026
      units: metric # or imperial
      provider: openweathermap
      apiKey: youropenweathermapkey # required only if not using provider, this reveals api key in requests
      cache: 5 # Time in minutes to cache API responses, to stay within limits
```

您可以选择不传递`latitude纬度`和`longitude经度`经度，小部件将使用您的当前位置（需要安全上下文，例如HTTPS）。

## Resources

您可以选择包含所有或部分可用resources。如果您不想看到某个资源，只需将其设置为false。

磁盘路径是由df（Mounted On）报告的路径，或者是磁盘的装载点。

CPU和内存资源信息是容器的使用情况，而[glances](glances.md) 则显示安装它的主机的统计信息。

注意：不幸的是，用于获取CPU温度的软件包（[systeminformation](https://systeminformation.io)）与某些设置不兼容，并且不会报告任何CPU温度值。

**任何要访问的磁盘都必须作为卷装载到容器中。**


```yaml
- resources:
      cpu: true
      memory: true
      disk: /disk/mount/path
      cputemp: true
      uptime: true
      units: imperial # only used by cpu temp
      refresh: 3000 # optional, in ms
```
您还可以通过`label` 选项进行分组，将资源分组到组名称下。

```yaml
- resources:
      label: System
      cpu: true
      memory: true

- resources:
      label: Storage
      disk: /mnt/storage
```

产生的效果：

<img width="373" alt="Resource Groups" src="https://user-images.githubusercontent.com/82196/189524699-e9005138-e049-4a9c-8833-ac06e39882da.png">

如果您有多个磁盘，并希望将它们组合在同一个标签下，您可以传递一个路径数组来实现。

```yaml
- resources:
      label: Storage
      disk:
          - /mnt/storage
          - /mnt/backup
          - /mnt/media
```

产生的效果：

<img width="369" alt="Screenshot 2022-09-11 at 2 15 42 PM" src="https://user-images.githubusercontent.com/82196/189524583-abdf4cc6-99da-430c-b316-16c567db5639.png">

您还可以提供一个可选的`expanded`属性，将其设置为true可以显示有关资源的其他详细信息。当未提供时，默认情况下`expanded`属性设置为false。


```yaml
- resources:
      label: Array Disks
      expanded: true
      disk:
          - /disk1
          - /disk2
          - /disk3
```

![194136533-c4238c82-4d67-41a4-b3c8-18bf26d33ac2](https://user-images.githubusercontent.com/3441425/194728642-a9885274-922b-4027-acf5-a746f58fdfce.png)


## Search

您可以在顶部小部件区域添加一个搜索栏，该搜索栏可以使用Google 谷歌、Duckduckgo、Bing 必应、Baidu 百度、Brave或任何其他支持 基本的`?q=` 搜索查询参数的 自定义`provider 提供程序`进行搜索。

```yaml
- search:
      provider: google # google, duckduckgo, bing, baidu, brave or custom
      focus: true # Optional, will set focus to the search bar on page load
      target: _blank # One of _self, _blank, _parent or _top
```

或对于自定义搜索:

```yaml
- search:
      provider: custom
      url: https://lougle.com/?q=
      target: _blank
```

还可以通过下拉列表支持多个`provider 提供程序`（不包括自定义）：

```yaml
- search:
      provider: [brave, google, duckduckgo]
```
## Unifi Controller

_(查找[Unifi控制服务](../services/unifi-controller.md)小部件)_

您可以通过Unifi（网络）控制器显示常规连接状态。进行身份验证时，您需要使用一个至少具有读取权限的本地帐户。

如果没有提供可选的"site"参数，该小部件将使用控制器的默认站点。

注意：如果您输入的凭据不正确，并收到“API错误”，则可能需要重新创建容器以清除缓存。

<img width="162" alt="unifi_infowidget" src="https://user-images.githubusercontent.com/4887959/197706832-f5a8706b-7282-4892-a666-b7d999752562.png">

```yaml
- unifi_console:
    url: https://unifi.host.or.ip:port
    username: user
    password: pass
    site: Site Name # optional
```

## Weather API

**注意：由于新用户不再提供免费的Weather API套餐，此小部件被视为"不推荐使用"。请参考openmeteo或openweathermap小部件以获取替代方案。**

免费套餐就足够了，它有所需的全部内容，不过您需要[注册](https://www.weatherapi.com/signup.aspx)并获取API密钥。


```yaml
- weatherapi:
      label: Kyiv # optional
      latitude: 50.449684
      longitude: 30.525026
      units: metric # or imperial
      apiKey: yourweatherapikey
      cache: 5 # Time in minutes to cache API responses, to stay within limits
```

您可以选择不传递`latitude纬度`和`longitude经度`经度，小部件将使用您的当前位置（需要安全上下文，例如HTTPS）。
