---
title: 故障排除
description: 基础故障排除方法
permalink: /docker/homepage/trouble
date: 2023-10-24 14:23:11
categories: 
  - docker教程
  - homepage
  - 问题
tags: 
  - 
---

## 常见故障排除提示

- 对于API错误，请单击小部件中的"API错误信息"按钮，通常会显示一些有关问题（如与服务主机的连接问题、身份验证问题等）的有用信息。
- 检查config/logs/homepage.log，对于Docker，请使用`docker logs homepage`命令。这可能会揭示错误的原因。
- 检查浏览器的错误控制台，有时也会提供有用的信息。
- 将 `ENV`由 `LOG_LEVEL`设置为 `debug`。

## 服务小部件错误

所有服务小部件的工作原理基本相同，即homepage通过代理调用该服务提供的API。大多数情况下，小部件无法正常工作是因为配置问题。当然，有时候确实会出点错。可以尝试一些基本的步骤：

1. 确保遵循https://gethomepage.dev/latest/configs/service-widgets/中提到的规则。除非另有说明，否则URL不应以斜杠或其他API路径结尾。每个小部件将自行处理路径。这非常重要，因为包含尾部斜杠可能导致错误。

2. 验证homepage安装是否可以连接到用于小部件URL的IP地址或主机。最简单的方法是通过在homepage机器上ping服务器来实现，对于Docker来说，这意味着得在容器内部执行，例如：

    ```
    docker exec homepage ping SERVICEIPORDOMAIN
    ```

    如果homepage安装（容器）无法访问该服务，那么您需要找出原因，例如，对于Docker来说，这可能意味着得将两个容器放置在同一个网络中，检查防火墙问题等。

3. 如果您已经验证homepage实际上可以访问该服务，那么您还可以使用例如`curl`检查API输出，这在需要提交错误报告时通常很有帮助。同样，根据您的网络设置，这可能需要在容器内部运行，因为 IP/主机名解析 在内部和外部可能不同。

    注意： 默认情况下，`curl`不会安装在基本映像中，但可以使用`apk add curl`将其添加到容器中。

    当然，API的确切端点和身份验证各不相同，但在许多情况下，可以通过搜索网络或查看homepage源代码（例如`src/widgets/{widget}/widget.js`）找到说明。

    详细介绍如何做到这一点超出了本文的范围，但 PiHole 的示例是：

    ```
    curl -L -k http://PIHOLEIPORHOST/admin/api.php
    ```

    或者对于AdGuard：

    ```
    curl -L -k -u 'username:password' http://ADGUARDIPORHOST/control/stats
    ```

    或者对于Portainer：

    ```
    curl -L -k -H 'X-Api-Key:YOURKEY' 'https://PORTAINERIPORHOST:PORT/api/endpoints/2/docker/containers/json'
    ```

    Sonarr：
    ```
    curl -L -k 'http://SONARRIPORHOST:PORT/api/v3/queue?apikey=YOURAPIKEY'
    ```

    这将返回一些数据，这些数据可能会揭示导致服务小部件中出现真正错误的问题。


## 自定义图标缺失

如果按照[Icons](../configs/services.md#icons) 说明正确添加和映射自定义图标后仍然无法看到图标，请尝试重新创建容器。