---
title: NPM
author: 
  name: 夏夏子
  link: https://github.com/syueya
date: 2025-09-29 14:01:46
permalink: /pages/444ca9/
categories: 
  - NAS玩法
  - 常用工具
tags: 
  - 
---

## compose文件

其中镜像二选一即可，看不惯英文就选汉化版的。
```
services:
  worktable:
    # image: 'jc21/nginx-proxy-manager:latest' # 原版
    image: 'chishin/nginx-proxy-manager-zh:latest' # 汉化版
    container_name: NPM
    restart: always
    ports:
      - '1080:80'  # 前面的端口自定义一个
      - '1081:81'  # 前面的端口自定义一个
      - '1043:443'  # 前面的端口自定义一个
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
```


## 初始化

1、路由上添加个端口映射，放开1043(43对应端口)端口。

![img](./img/npm-00.png)

2、浏览器输入绿联 ip:1081(81对应端口)进入 npm，默认的账号为admin@example.com，默认的密码是：changeme。

3、登入后点击右上角的头像，可以点击编辑详情按钮修改用户名和邮箱，也可以修改密码，首次进入推荐更改账号以及密码。

![img](./img/npm-01.png)


## SSL 证书

1、点击 SSL证书菜单（SSL Certificate），然后点击添加证书按钮，选择 Let's Encrypt来添加证书。
> 证书有有效期，到期后需更新。

![img](./img/npm-02.png)

2、添加证书选项
- 域名（Domain Names）：填写两个，一个直接填写你申请的域名，一个填写`*.域名`。
- 勾选使用 DNS 认证（Use a DNS Challenge）。
- DNS 提供者（DNS Provider）选择你申请的域名服务商，比如阿里。
- 证书内容（Credentials File Content）里把=后面的内容换成你自己的 accesskey。
- 等待时间（Propagation Seconds）可默认不填。
- 勾选同意条款然后点击保存
![img](./img/npm-03.png)



## 反代端口

点击仪表盘里的代理服务器，或者点击主机(Hosts)下的代理服务(Proxy Hosts)，添加然后在页面点击添加代理服务(Add Proxy Hosts)按钮。

![img](./img/npm-04.png)

主要设置以下两项：
1）详细内容Details
- 域名是二级域名，比如 emby就是`emby.域名`；
- 协议就是 http；
- 转发主机就是绿联的 IP；
- 转发端口就是你需要转发的容器服务比如 emby 对应的端口；
- 勾选下面三项内容。
2）SSL
在SSL证书里勾选刚才申请的证书和下面四项内容。

![img](./img/npm-05.png)

## 测试

外网浏览器输入`https://emby.域名:1043` 查看是否可以访问emby。